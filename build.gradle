apply plugin: 'cpp'

libraries {
    hayai {}
}

executables {
    benchmarks {
        binaries.all {
            lib libraries.hayai.static
        }
    }
}

sources {
    hayai {
        cpp {
            source {
                srcDir "lib/hayai/src"
                include "*.cpp"
            }
            exportedHeaders {
                srcDir "lib/hayai/src"
                include "*.hpp"
            }
        }
    }
}

import org.apache.tools.ant.taskdefs.condition.Os

task runBenchmarks(type:Exec, dependsOn: 'assemble') {
    workingDir './build/binaries/benchmarksExecutable'
    commandLine Os.isFamily(Os.FAMILY_WINDOWS) ? 'benchmarks.exe' : './benchmarks'
}